# V3.0 å„ªå‹¢å¤©è³¦è©•æ¸¬ç³»çµ± - æœå‹™æ¶æ§‹è¦ç¯„

---

**æ–‡ä»¶ç‰ˆæœ¬:** v3.0
**æœ€å¾Œæ›´æ–°:** 2025-09-30
**ç‹€æ…‹:** ç”Ÿç”¢ç’°å¢ƒé…ç½®

---

## ç³»çµ±æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ¶ç€è¦½å™¨                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                       â”‚
                  â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   å‰ç«¯æœå‹™      â”‚     â”‚   API ç¶²é—œ      â”‚
        â”‚   Port: 3000    â”‚     â”‚   Port: 8004    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                       â”‚
                  â”‚                       â–¼
                  â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚             â”‚   æ ¸å¿ƒ API      â”‚
                  â”‚             â”‚ (FastAPI)       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   æ•¸æ“šåº«å±¤      â”‚
                              â”‚  (SQLite)       â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç«¯å£åˆ†é…è¦ç¯„

### ç”Ÿç”¢ç’°å¢ƒç«¯å£

| æœå‹™åç¨± | ç«¯å£ | ç”¨é€” | ç‹€æ…‹ | è¨ªå•åœ°å€ |
|:---------|:-----|:-----|:-----|:---------|
| **å‰ç«¯æœå‹™** | 3000 | éœæ…‹æ–‡ä»¶æœå‹™å™¨ | âœ… é‹è¡Œä¸­ | http://localhost:3000 |
| **API ä¸»æœå‹™** | 8004 | FastAPI ä¸»è¦ API ç«¯é» | âœ… é‹è¡Œä¸­ | http://localhost:8004/api |

### é–‹ç™¼ç’°å¢ƒé ç•™ç«¯å£

| ç«¯å£ç¯„åœ | ç”¨é€” |
|:---------|:-----|
| 8001 | é–‹ç™¼æ¸¬è©¦ API |
| 8002-8003 | è‡¨æ™‚æ¸¬è©¦æœå‹™ |
| 8005-8010 | å¾®æœå‹™æ“´å±•é ç•™ |

## æœå‹™å•Ÿå‹•è…³æœ¬

### 1. æ¸…ç†æ‰€æœ‰æœå‹™

```bash
#!/bin/bash
# cleanup_services.sh

echo "ğŸ§¹ æ¸…ç†æ‰€æœ‰é‹è¡Œä¸­çš„æœå‹™..."

# åœæ­¢å‰ç«¯æœå‹™
pkill -f "python.*3000" 2>/dev/null

# åœæ­¢æ‰€æœ‰ API æœå‹™
for port in 8001 8002 8003 8004 8005; do
    lsof -ti:$port | xargs kill -9 2>/dev/null
done

echo "âœ… æ¸…ç†å®Œæˆ"
```

### 2. å•Ÿå‹•ç”Ÿç”¢ç’°å¢ƒ

```bash
#!/bin/bash
# start_production.sh

echo "ğŸš€ å•Ÿå‹• V3.0 ç”Ÿç”¢ç’°å¢ƒ..."

# å•Ÿå‹•å‰ç«¯æœå‹™ (Port 3000)
cd /home/os-sunnie.gd.weng/python_workstation/side-project/strength-system
python3 -m http.server 3000 --directory src/main/resources/static &

# å•Ÿå‹• API æœå‹™ (Port 8004)
cd src/main/python
PYTHONPATH=. python3 -m uvicorn api.main:app --host 0.0.0.0 --port 8004 --reload &

echo "âœ… æœå‹™å•Ÿå‹•å®Œæˆ"
echo "ğŸ“± å‰ç«¯: http://localhost:3000"
echo "ğŸ”Œ API: http://localhost:8004/docs"
```

## API ç«¯é»è¦ç¯„

### V3.0 æ ¸å¿ƒç«¯é»

| ç«¯é» | æ–¹æ³• | åŠŸèƒ½ | ç‰ˆæœ¬ |
|:-----|:-----|:-----|:-----|
| `/api/system/health` | GET | å¥åº·æª¢æŸ¥ | ç¾è¡Œ |
| `/api/assessment/questions` | GET | ç²å–é¡Œç›® | ç¾è¡Œ |
| `/api/privacy/consent` | POST | ç”¨æˆ¶åŒæ„ | ç¾è¡Œ |
| `/api/assessment/start` | POST | é–‹å§‹æ¸¬è©• | ç¾è¡Œ |
| `/api/assessment/submit` | POST | æäº¤ç­”æ¡ˆ | ç¾è¡Œ |
| `/api/assessment/scoring/calculate` | POST | è¨ˆç®—åˆ†æ•¸ | ç¾è¡Œ |
| `/api/reports/generate` | POST | ç”Ÿæˆå ±å‘Š | ç¾è¡Œ |

## å‰ç«¯è·¯ç”±è¦ç¯„

| è·¯ç”± | é é¢ | åŠŸèƒ½ | ç‹€æ…‹ |
|:-----|:-----|:-----|:-----|
| `/` | ç›®éŒ„åˆ—è¡¨ | é–‹ç™¼å°èˆª | âœ… |
| `/landing.html` | ç™»é™¸é é¢ | å•†æ¥­è½‰æ›å„ªåŒ–ç‰ˆ | âœ… |
| `/v4_assessment.html` | V4 æ¸¬è©• | Thurstonian IRT æ¸¬è©• | âœ… |
| `/test_submit.html` | æ¸¬è©¦é é¢ | API æ¸¬è©¦å·¥å…· | âœ… |
| `/results.html` | çµæœå±•ç¤º | æ¸¬è©•çµæœå±•ç¤º | ğŸš§ é–‹ç™¼ä¸­ |

## æ•¸æ“šæµæ¶æ§‹

```
ç”¨æˆ¶è¨ªå•æµç¨‹:
1. ç”¨æˆ¶è¨ªå• http://localhost:3000/landing.html
2. é»æ“Š "é–‹å§‹æ¸¬è©•"
3. å‰ç«¯èª¿ç”¨ POST /api/assessment/start
4. è·³è½‰åˆ° /v4_assessment.html
5. ç”¨æˆ¶å®Œæˆæ¸¬è©•
6. å‰ç«¯èª¿ç”¨ POST /api/assessment/submit
7. å¾Œç«¯è™•ç†ä¸¦è¿”å›çµæœ
8. è·³è½‰åˆ° /results.html å±•ç¤ºçµæœ
```

## ç’°å¢ƒè®Šé‡é…ç½®

```bash
# .env æ–‡ä»¶é…ç½®
DATABASE_URL=sqlite:///./gallup_assessment.db
SECRET_KEY=your-secret-key-here
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:8004"]
API_VERSION=v3.0
ENVIRONMENT=production
```

## ç›£æ§èˆ‡æ—¥èªŒ

### æœå‹™å¥åº·æª¢æŸ¥

```bash
# æª¢æŸ¥æœå‹™ç‹€æ…‹
curl http://localhost:8004/api/system/health
curl http://localhost:3000/landing.html -I
```

### æ—¥èªŒä½ç½®

- API æ—¥èªŒ: `/var/log/strength-system/api.log`
- å‰ç«¯è¨ªå•æ—¥èªŒ: `/var/log/strength-system/access.log`
- éŒ¯èª¤æ—¥èªŒ: `/var/log/strength-system/error.log`

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **ç«¯å£ä½”ç”¨**
   ```bash
   # æŸ¥æ‰¾ä½”ç”¨ç«¯å£çš„é€²ç¨‹
   lsof -i :3000
   lsof -i :8004
   ```

2. **API ç„¡éŸ¿æ‡‰**
   ```bash
   # é‡å•Ÿ API æœå‹™
   pkill -f "uvicorn.*8004"
   cd src/main/python && python3 -m uvicorn api.main:app --port 8004 --reload
   ```

3. **å‰ç«¯é é¢ 404**
   ```bash
   # æª¢æŸ¥éœæ…‹æ–‡ä»¶è·¯å¾‘
   ls -la src/main/resources/static/
   ```

## éƒ¨ç½²æª¢æŸ¥æ¸…å–®

- [ ] æ¸…ç†æ‰€æœ‰æ¸¬è©¦ç«¯å£
- [ ] ç¢ºèªæ•¸æ“šåº«é€£æ¥
- [ ] å•Ÿå‹•å‰ç«¯æœå‹™ (3000)
- [ ] å•Ÿå‹• API æœå‹™ (8004)
- [ ] æ¸¬è©¦å¥åº·æª¢æŸ¥ç«¯é»
- [ ] é©—è­‰å‰ç«¯é é¢åŠ è¼‰
- [ ] æ¸¬è©¦å®Œæ•´ç”¨æˆ¶æµç¨‹
- [ ] æª¢æŸ¥æ—¥èªŒè¼¸å‡º
- [ ] è¨­ç½®ç›£æ§å‘Šè­¦

## å®‰å…¨æ³¨æ„äº‹é …

1. ç”Ÿç”¢ç’°å¢ƒå¿…é ˆä½¿ç”¨ HTTPS
2. å¯¦æ–½ CORS ç­–ç•¥
3. API é€Ÿç‡é™åˆ¶
4. SQL æ³¨å…¥é˜²è­·
5. XSS é˜²è­·
6. CSRF Token é©—è­‰

---

**ç¶­è­·è¯ç¹«**: DevOps Team
**æ›´æ–°é€±æœŸ**: æ¯æœˆæª¢æŸ¥
**ä¸‹æ¬¡å¯©æŸ¥**: 2025-10-30