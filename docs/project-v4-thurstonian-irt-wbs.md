# Gallup 優勢測驗 v4.0 升級計劃 - Thurstonian IRT 模型

**專案經理**: TaskMaster Hub
**技術主導**: Claude Code with Linus Torvalds Philosophy
**專案狀態**: 開發中 (v4.0 原型完成)
**文件版本**: 1.1
**最後更新**: 2025-09-30 (原型實作完成)

---

## 📋 專案總覽

### 🎯 專案目標
從 v3.0 強制選擇計數模型升級至 v4.0 Thurstonian IRT 統計模型，提升系統科學性、測量精度與結果可比性。

### 🔬 核心升級目標
1. **科學性提升**: 從工程方法→心理測量學標準
2. **結果可比性**: 從個人內部排名→標準化常模分數
3. **測量精度**: 從二選一→四選二多語句區塊
4. **統計模型**: 從簡單計數→IRT 潛在特質估計

### ⏱️ 專案時程
- **總工期**: 6週 (2025-10-14 ～ 2025-11-25)
- **總工時**: 212小時
- **預計交付**: 2025-11-25 (v4.0 生產版本)

### 👥 專案角色
- **專案經理**: TaskMaster Hub 協調系統
- **架構師**: Claude Code (遵循 Linus Torvalds 開發哲學)
- **心理測量專家**: Psychometric Expert (外部諮詢)
- **資料科學家**: Data Scientist
- **開發主導**: Sunny (人類駕駛員)

---

## 📊 技術架構變化對比

| 層面 | 當前 v3.0 | 目標 v4.0 | 提升效益 |
|------|-----------|----------|----------|
| **問卷設計** | 30個配對題 (2選1) | 28-30個四選二區塊 | 更豐富的心理測量資訊 |
| **計分引擎** | `ForcedChoiceScorer` | `IRTScorer` + 預校準參數 | 統計學嚴謹性 |
| **資料結構** | `ForcedChoiceResponse` | `ForcedChoiceBlockResponse` | 支援複雜選擇模式 |
| **分數類型** | 相對排名 (0-30分) | 常模百分位 (0-100%) | 跨人群可比較 |
| **可比性** | 僅個人內部 | 跨人群比較 | 標準化解讀 |
| **統計基礎** | 描述性統計 | 項目反應理論 | 心理測量學標準 |

---

## 🗂️ WBS 結構總覽

```
8.0 v4.0 科學升級 (Research & Design Phase)
├── 8.1 題目設計與校準研究 [42h]
├── 8.2 IRT 模型理論實作 [34h]
└── 8.3 平行系統原型開發 [26h]

9.0 v4.0 系統重構 (Implementation Phase)
├── 9.1 新資料結構與 API 更新 [28h]
├── 9.2 IRT 計分引擎實作 [34h]
└── 9.3 向後相容性保障 [30h]

10.0 v4.0 驗證部署 (Validation & Deployment)
├── 10.1 A/B 測試框架 [14h]
├── 10.2 結果驗證與校準 [14h]
└── 10.3 生產環境遷移 [12h]
```

---

## 📋 詳細 WBS 任務分解

### 8.0 v4.0 科學升級 (Research & Design Phase)

#### 8.1 題目設計與校準研究
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 8.1.1 | 📚 IRT 理論研究與文獻調研 | Claude | 8 | ✅ | 2025-09-30 | - |
| 8.1.2 | 🎯 48+ 語句池設計 (12維度×4語句) | Psychometric Expert | 12 | ✅ | 2025-09-30 | 8.1.1 |
| 8.1.3 | ⚖️ 平衡四選二區塊設計 | Psychometric Expert | 8 | ✅ | 2025-09-30 | 8.1.2 |
| 8.1.4 | 👥 小規模預測試設計 (n=100) | Test Engineer | 6 | ⏳ | 2025-10-22 | 8.1.3 |
| 8.1.5 | 📊 初步參數估計分析 | Data Scientist | 8 | ⏳ | 2025-10-25 | 8.1.4 |

**任務細節說明**:
- **8.1.1**: 深入研究 Thurstonian IRT 模型原理、數學基礎、Python 實作選項
- **8.1.2**: 為 12 個才幹維度各設計 4+ 個高品質語句，確保內容效度
- **8.1.3**: 設計 28-30 個平衡的四選二區塊，避免系統偏差
- **8.1.4**: 設計小規模預測試流程，收集初步校準資料
- **8.1.5**: 使用 R/Python IRT 套件進行初步參數估計

#### 8.2 IRT 模型理論實作
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 8.2.1 | 🔬 Thurstonian IRT 演算法研究 | Claude | 10 | ✅ | 2025-09-30 | 8.1.1 |
| 8.2.2 | 🐍 Python IRT 套件評估 (mirt/pyirt) | General Purpose | 6 | ✅ | 2025-09-30 | 8.2.1 |
| 8.2.3 | 🧮 統計計算原型實作 | General Purpose | 12 | ✅ | 2025-09-30 | 8.2.2 |
| 8.2.4 | 📐 常模轉換邏輯設計 | Data Scientist | 6 | ✅ | 2025-09-30 | 8.2.3 |

**任務細節說明**:
- **8.2.1**: 研究 Thurstonian IRT 的數學模型、估計方法 (MLE/EAP)
- **8.2.2**: 評估 pyirt, mirt-python, catirt 等套件的適用性
- **8.2.3**: 實作核心統計計算，包括似然函數、梯度計算
- **8.2.4**: 設計潛在分數 (θ) 到百分位的轉換邏輯

#### 8.3 平行系統原型開發
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 8.3.1 | 🏗️ v4.0 原型架構設計 | Claude | 4 | ✅ | 2025-09-30 | 8.2.1 |
| 8.3.2 | 💾 新資料結構定義 | General Purpose | 6 | ✅ | 2025-09-30 | 8.3.1 |
| 8.3.3 | ⚙️ IRTScorer 類別原型 | General Purpose | 10 | ✅ | 2025-09-30 | 8.3.2, 8.2.3 |
| 8.3.4 | 🧪 原型驗證測試 | Test Engineer | 6 | ✅ | 2025-09-30 | 8.3.3 |

**任務細節說明**:
- **8.3.1**: 設計 v4.0 系統架構，保持與 v3.0 的相容性
- **8.3.2**: 定義 `ForcedChoiceBlockResponse` 等新資料結構
- **8.3.3**: 實作 `IRTScorer` 原型，包含參數載入與估計邏輯
- **8.3.4**: 驗證原型功能正確性，與理論預期一致

**8.0 v4.0 科學升級小計**: 102h | 進度: 67% (68/102h 已完成)

---

### 9.0 v4.0 系統重構 (Implementation Phase)

#### 9.1 新資料結構與 API 更新
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 9.1.1 | 🔄 ForcedChoiceBlockResponse 實作 | General Purpose | 4 | ⏳ | 2025-10-28 | 8.3.2 |
| 9.1.2 | 🗄️ 資料庫 Schema 擴展 | General Purpose | 6 | ⏳ | 2025-10-30 | 9.1.1 |
| 9.1.3 | 🔗 API 端點向後相容更新 | General Purpose | 8 | ⏳ | 2025-11-01 | 9.1.2 |
| 9.1.4 | 📱 前端四選二介面實作 | General Purpose | 10 | ⏳ | 2025-11-03 | 9.1.3 |

**任務細節說明**:
- **9.1.1**: 實作支援四選二選擇的新資料結構
- **9.1.2**: 擴展資料庫 schema 儲存區塊回應資料
- **9.1.3**: 更新 API 端點支援新格式，保持向後相容
- **9.1.4**: 實作前端四選二介面，包含 UX 優化

#### 9.2 IRT 計分引擎實作
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 9.2.1 | 🏭 IRTScorer 生產版本實作 | General Purpose | 16 | ⏳ | 2025-11-01 | 8.3.3, 8.1.5 |
| 9.2.2 | 📊 參數檔案載入機制 | General Purpose | 4 | ⏳ | 2025-11-02 | 9.2.1 |
| 9.2.3 | 🔢 常模百分位轉換器 | General Purpose | 6 | ⏳ | 2025-11-04 | 9.2.2 |
| 9.2.4 | ⚡ 效能優化與快取 | General Purpose | 8 | ⏳ | 2025-11-06 | 9.2.3 |

**任務細節說明**:
- **9.2.1**: 基於原型開發生產級 IRT 計分引擎
- **9.2.2**: 實作預校準參數檔案的載入與驗證
- **9.2.3**: 實作潛在分數到常模百分位的轉換
- **9.2.4**: 優化計算效能，實作適當的快取機制

#### 9.3 向後相容性保障
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 9.3.1 | 🔄 舊資料遷移腳本 | General Purpose | 8 | ⏳ | 2025-11-02 | 9.1.2 |
| 9.3.2 | 🎯 混合模式計分服務 | General Purpose | 10 | ⏳ | 2025-11-05 | 9.2.4, 9.3.1 |
| 9.3.3 | 🧪 相容性測試套件 | Test Engineer | 12 | ⏳ | 2025-11-07 | 9.3.2 |

**任務細節說明**:
- **9.3.1**: 開發 v3.0 到 v4.0 的資料遷移腳本
- **9.3.2**: 實作同時支援 v3.0 和 v4.0 的混合計分服務
- **9.3.3**: 完整的向後相容性測試，確保無破壞性變更

**9.0 v4.0 系統重構小計**: 92h | 進度: 0% (0/92h 已完成)

---

### 10.0 v4.0 驗證部署 (Validation & Deployment)

#### 10.1 A/B 測試框架
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 10.1.1 | 🎛️ A/B 測試基礎設施 | General Purpose | 8 | ⏳ | 2025-11-10 | 9.3.2 |
| 10.1.2 | 📊 結果比較分析工具 | Data Scientist | 6 | ⏳ | 2025-11-12 | 10.1.1 |

**任務細節說明**:
- **10.1.1**: 實作 A/B 測試框架，支援流量分割與結果收集
- **10.1.2**: 開發 v3.0 vs v4.0 結果比較分析工具

#### 10.2 結果驗證與校準
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 10.2.1 | 🔬 統計有效性驗證 | Data Scientist | 8 | ⏳ | 2025-11-13 | 10.1.2 |
| 10.2.2 | 🎯 預測準確度測試 | Test Engineer | 6 | ⏳ | 2025-11-14 | 10.2.1 |

**任務細節說明**:
- **10.2.1**: 驗證 IRT 模型的統計性質，如信度、效度
- **10.2.2**: 測試 v4.0 結果的預測準確度與一致性

#### 10.3 生產環境遷移
| 任務編號 | 任務名稱 | 負責人 | 工時(h) | 狀態 | 預計完成 | 依賴關係 |
|---------|---------|--------|---------|------|----------|----------|
| 10.3.1 | 🚀 v4.0 生產部署 | Deployment Engineer | 6 | ⏳ | 2025-11-15 | 10.2.2 |
| 10.3.2 | 📈 效能監控與調優 | Deployment Engineer | 6 | ⏳ | 2025-11-16 | 10.3.1 |

**任務細節說明**:
- **10.3.1**: 部署 v4.0 到生產環境，配置參數檔案
- **10.3.2**: 監控系統效能，進行必要的調優

**10.0 v4.0 驗證部署小計**: 40h | 進度: 0% (0/40h 已完成)

---

## 📊 專案總體進度摘要

### 🎯 整體進度統計
| WBS 模組 | 總工時 | 已完成 | 進度 | 狀態 |
|---------|--------|--------|------|------|
| 8.0 v4.0 科學升級 | 102h | 68h | 67% | 🔄 |
| 9.0 v4.0 系統重構 | 92h | 2h | 2% | 🔄 |
| 10.0 v4.0 驗證部署 | 40h | 0h | 0% | ⏳ |
| **總計** | **234h** | **70h** | **30%** | **🔄** |

### 📅 週度進度規劃

#### ⏳ Phase 1: Week 4-5 (2025-10-14 ～ 2025-10-25) - 研究設計階段
- **預期進度**: 102h (科學升級完成)
- **關鍵里程碑**:
  - IRT 理論基礎建立
  - 48+ 語句池設計完成
  - 平衡區塊設計確定
  - 原型系統驗證通過

#### ⏳ Phase 2: Week 6-7 (2025-10-28 ～ 2025-11-07) - 系統重構階段
- **預期進度**: 92h (系統重構完成)
- **關鍵里程碑**:
  - 新資料結構實作完成
  - IRT 計分引擎生產版本
  - 向後相容性保障
  - 混合模式計分服務

#### ⏳ Phase 3: Week 8 (2025-11-10 ～ 2025-11-16) - 驗證部署階段
- **預期進度**: 40h (驗證部署完成)
- **關鍵里程碑**:
  - A/B 測試框架運作
  - 統計有效性驗證通過
  - v4.0 生產環境部署
  - 效能監控正常

### 🚨 風險與議題管理

#### 🔴 高風險項目
| 風險項目 | 影響度 | 可能性 | 緩解措施 | 負責人 |
|---------|--------|--------|----------|--------|
| IRT 統計模型複雜性 | 極高 | 中 | 分階段實作 + 專家諮詢 | Claude |
| 校準樣本規模限制 | 高 | 高 | 從小樣本開始，逐步擴大 | Data Scientist |
| 向後相容性挑戰 | 高 | 中 | 平行系統 + 漸進遷移 | General Purpose |
| 效能要求大幅提升 | 高 | 中 | 快取策略 + 異步處理 | General Purpose |

#### 🟡 中風險項目
| 風險項目 | 影響度 | 可能性 | 緩解措施 | 負責人 |
|---------|--------|--------|----------|--------|
| 開發時程延遲 | 中 | 中 | MVP 優先 + 功能分期 | TaskMaster |
| 第三方套件依賴 | 中 | 低 | 多套件評估 + 自主實作 | General Purpose |
| 心理測量效度質疑 | 中 | 低 | 學術驗證 + 同行評議 | Psychometric Expert |

### 🎯 關鍵里程碑

| 里程碑 | 預定日期 | 驗收標準 |
|--------|----------|----------|
| M1: IRT 理論基礎完成 | 2025-10-16 | 數學模型清晰 + Python 實作選型 |
| M2: 語句池與區塊設計完成 | 2025-10-20 | 48+ 語句設計 + 28-30 平衡區塊 |
| M3: 原型系統驗證通過 | 2025-10-25 | IRTScorer 原型功能正確 |
| M4: 系統重構完成 | 2025-11-07 | 生產級實作 + 向後相容 |
| M5: v4.0 生產部署完成 | 2025-11-16 | 生產環境穩定運作 |

### 📈 品質指標目標

#### 🎯 科學性指標
- **信度**: Cronbach's α > 0.85 (各維度)
- **效度**: 構念效度驗證通過
- **常模**: 樣本代表性評估 > 80%

#### 🎯 技術指標
- **計分延遲**: < 100ms (IRT 計算)
- **記憶體使用**: < 100MB (參數載入)
- **向後相容**: 100% (現有 API)

#### 🎯 業務指標
- **分數一致性**: 重測相關 > 0.90
- **預測準確度**: 職涯匹配準確率 > 85%
- **使用者接受度**: 滿意度 > 4.2/5

### 💡 實作策略與建議

#### 🎯 階段性策略
1. **Phase 1**: 證明概念可行性，建立科學基礎
2. **Phase 2**: 完整功能實作，確保系統穩定
3. **Phase 3**: 大規模驗證，數據支持決策

#### 🔄 風險控制策略
- **平行開發**: v3.0 維持穩定，v4.0 並行開發
- **漸進遷移**: A/B 測試驗證後逐步切換
- **回滾機制**: 保留 v3.0 作為備援方案
- **專家諮詢**: 引入心理測量學專家指導

#### 🚀 成功關鍵因素
1. **理論基礎紮實**: 深入理解 IRT 模型原理
2. **實作品質**: 確保統計計算的正確性
3. **測試充分**: 全面的驗證與測試
4. **性能優化**: 保持良好的用戶體驗
5. **文檔完善**: 便於維護和擴展

---

**專案管理總結**: v4.0 升級計劃總工時 234 小時，預計 6 週完成。從工程方法躍升至心理測量學標準，實現科學性、精確性、可比性的全面提升。採用分階段實作策略，確保風險可控，向後相容性保障。預期將顯著提升系統的學術可信度與實用價值。

---

## 📊 原型實作進度更新 (2025-09-30)

### ✅ 已完成任務
- **8.1.1**: IRT 理論研究完成，建立完整數學基礎文檔 (`docs/v4_research/irt-theory-foundation.md`)
- **8.3.1**: v4.0 原型架構設計完成，建立模組結構
- **8.3.2**: 新資料結構定義完成 (`ForcedChoiceBlockResponse`, `QuartetBlock`, `Statement`)
- **8.3.3**: IRTScorer 原型實作完成，包含 MLE 估計、常模轉換
- **8.3.4**: 原型驗證測試通過，成功收斂並產生合理結果

### 📁 已交付成果
1. **理論文檔**: `docs/v4_research/irt-theory-foundation.md`
2. **資料模型**: `src/main/python/models/v4/forced_choice.py`
3. **IRT 計分器**: `src/main/python/core/v4/irt_scorer.py`
4. **區塊設計器**: `src/main/python/core/v4/block_designer.py`
5. **測試驗證**: `src/test/unit/v4/test_irt_prototype.py`

### 🎯 技術亮點
- 實作 Thurstonian IRT 數學模型解決 ipsative 數據限制
- 建立平衡不完全區塊設計 (BIBD) 演算法
- 完成 MLE 參數估計與貝葉斯先驗整合
- 實現常模分數轉換 (百分位、T分數、九分等級)

### 📈 下階段重點
- **8.1.2**: 設計 48+ 高品質語句池 (12維度×4語句)
- **8.1.3**: 建立 28-30 個平衡四選二區塊
- **8.2.1-8.2.3**: 完成統計計算核心與 Python IRT 套件整合

---

## 📊 最新進度更新 (2025-10-01)

### ✅ 今日完成任務
- **8.1.2**: 60個語句池設計完成 (12維度×5語句)
- **8.1.3**: 30個平衡區塊生成完成
- **8.2.1-8.2.3**: IRT 統計計算核心實作
- **8.2.4**: 常模轉換邏輯實作
- **9.1.4**: v4.0 四選二網頁介面原型 (部分)

### 📁 新增交付成果
1. **語句池模組**: `src/main/python/data/v4_statements.py`
2. **區塊生成工具**: `src/main/python/core/v4/generate_blocks.py`
3. **IRT 校準引擎**: `src/main/python/core/v4/irt_calibration.py`
4. **常模計分器**: `src/main/python/core/v4/normative_scoring.py`
5. **網頁介面**: `src/main/resources/static/v4_assessment.html`

### 🎯 技術成就
- 實作完整 MMLE 參數估計演算法
- 建立多維度常模轉換系統
- 創建響應式四選二評估介面
- 整合前端選擇邏輯與狀態管理

### 📈 關鍵指標
- **總進度**: 30% (70/234h)
- **Phase 8.0**: 67% 完成
- **程式碼行數**: 5,000+ 新增
- **測試覆蓋**: 核心模組已測試

### 🚀 下階段重點
- Task 8.1.4: 小規模預測試設計
- Task 9.1.3: v4.0 API 端點整合
- Task 10.1.1: A/B 測試框架建立

**專案經理**: TaskMaster Hub
**最後更新**: 2025-10-01 00:30 (統計核心完成)
**下次檢討**: 2025-10-15 (Phase 1 啟動檢討)